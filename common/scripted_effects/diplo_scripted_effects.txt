puppet_command = {
	save_event_target_as = new_puppet
	puppet_military = yes
	OVERLORD = {
		set_autonomy = {
			target = event_target:new_puppet
			autonomy_state = autonomy_temporary
		}
		country_event = Puppet_Event.1
	}
}
puppet_autonomous = {
	if = {
		limit = {
			is_subject_of = RUS
		}
		set_cosmetic_tag = COUNTRY_Soviet_Socialist_Republic
	}
}
puppet_military = {
	set_cosmetic_tag = COUNTRY_Military_Administration
}
puppet_lose_military = {
	if = {
		limit = {
			has_cosmetic_tag = COUNTRY_Military_Administration
		}
		drop_cosmetic_tag = yes
	}
}
puppet_satellite = {
	random_cosmetic = yes
}
random_cosmetic = {
	hidden_effect = {
		drop_cosmetic_tag = yes
		if = {
			limit = {
				is_subject = yes
			}
			random_list = {
				10 = { set_cosmetic_tag = COUNTRY_Democratic_Peoples_Republic }
				10 = { set_cosmetic_tag = COUNTRY_Democratic_Peoples_Republic_2 }
				10 = { set_cosmetic_tag = COUNTRY_Democratic_Republic }
				10 = { set_cosmetic_tag = COUNTRY_Democratic_Republic_2 }
				10 = { set_cosmetic_tag = COUNTRY_Peoples_Democratic_Republic }
				10 = { set_cosmetic_tag = COUNTRY_Peoples_Democratic_Republic_2 }
				10 = { set_cosmetic_tag = COUNTRY_Peoples_Republic }
				10 = { set_cosmetic_tag = COUNTRY_Peoples_Republic_2 }
				10 = { set_cosmetic_tag = COUNTRY_Peoples_Socialist_Republic }
				10 = { set_cosmetic_tag = COUNTRY_Peoples_Socialist_Republic_2 }
				10 = { set_cosmetic_tag = COUNTRY_Republic }
				10 = { set_cosmetic_tag = COUNTRY_Republic_2 }
				10 = { set_cosmetic_tag = COUNTRY_Socialist_Peoples_Republic }
				10 = { set_cosmetic_tag = COUNTRY_Socialist_Peoples_Republic_2 }
				10 = { set_cosmetic_tag = COUNTRY_Socialist_Republic }
				10 = { set_cosmetic_tag = COUNTRY_Socialist_Republic_2 }
			}
			else = {
				add_to_variable = { global.random_cosmetic_pain = 1 }
				log = "#[?global.random_cosmetic_pain]. RANDOM_COSMETIC FAILLURE DUE TO PARADOX'S BAD DESIGN"
			}
		}
	}
}

do_cold_war_sphere_arrays = {
	clear_array = global.RUS_cold_war_sphere_array
	every_country = {
		limit = {
			NOT = { tag = RUS }
			is_major = no
			RUS_cold_war_sphere = yes
		}
		add_to_array = { global.RUS_cold_war_sphere_array = THIS }
	}
	every_country = {
		limit = {
			NOT = { tag = RUS }
			is_major = yes
			RUS_cold_war_sphere = yes
		}
		add_to_array = {
			array = global.RUS_cold_war_sphere_array
			value = THIS
			index = 0
		}
	}
	add_to_array = {
		array = global.RUS_cold_war_sphere_array
		value = RUS
		index = 0
	}



	clear_array = global.CHI_cold_war_sphere_array
	every_country = {
		limit = {
			NOT = { tag = CHI }
			is_major = no
			CHI_cold_war_sphere = yes
		}
		add_to_array = { global.CHI_cold_war_sphere_array = THIS }
	}
	every_country = {
		limit = {
			NOT = { tag = CHI }
			is_major = yes
			CHI_cold_war_sphere = yes
		}
		add_to_array = {
			array = global.CHI_cold_war_sphere_array
			value = THIS
			index = 0
		}
	}
	add_to_array = {
		array = global.CHI_cold_war_sphere_array
		value = CHI
		index = 0
	}
}

d_call_to_arms = {
	for_each_scope_loop = {
		array = global.RUS_cold_war_factions
		every_other_country = {
			limit = {
				is_in_faction_with = PREV
			}
			RUS = {
				add_to_faction = PREV
			}
		}
		RUS = {
			add_to_faction = PREV
		}
	}
	clear_array = global.RUS_cold_war_factions

	
	for_each_scope_loop = {
		array = global.CHI_cold_war_factions
		every_other_country = {
			limit = {
				is_in_faction_with = PREV
			}
			CHI = {
				add_to_faction = PREV
			}
		}
		CHI = {
			add_to_faction = PREV
		}
	}
	clear_array = global.CHI_cold_war_factions
}
add_rival_government = {
	add_to_array = { THIS.rival_governments = event_target:rival_gov }
	add_ai_strategy = {
		type = antagonize
		id = event_target:rival_gov
		value = 250
	}

	event_target:rival_gov = {
		add_to_array = { THIS.rival_governments = PREV }
		add_ai_strategy = {
			type = antagonize
			id = PREV
			value = 250
		}
	}
}